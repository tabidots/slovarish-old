{"version":3,"sources":["slovarish/frontend/jaro.cljs"],"mappings":"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","names":["slovarish.frontend.jaro/ordered-matches","s1","s2","enumerate","coll","cljs.core.map_indexed","cljs.core/vector","floor","x","js/Math","window-span","x__4336__auto__","y__4337__auto__","cljs.core/count","cljs.core.remove","cljs.core/nil?","iter__4652__auto__","s__35666","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","b__35668","cljs.core/chunk-buffer","i__35667","vec__35669","cljs.core/-nth","cljs.core.nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__35665","cljs.core/chunk-rest","vec__35682","cljs.core/first","cljs.core/cons","cljs.core/rest","i","top","s__35673","b__35675","i__35674","vec__35676","iter__35672","vec__35679","s__35686","b__35688","i__35687","vec__35689","iter__35685","vec__35692","j","bottom","cljs.core._EQ_","slovarish.frontend.jaro/jaro-distance","m1","m2","cljs.core/empty?","m","non-matches","cljs.core.map","cljs.core/=","cljs.core.filter","cljs.core/false?","t","cljs.core/chunk-first"],"sourcesContent":["(ns slovarish.frontend.jaro)\n\n(defn- ordered-matches\n  [s1 s2]\n  (let [enumerate   (fn [coll] (map-indexed vector coll))\n        floor       (fn [x] (.floor js/Math x))\n        window-span (-> (max (count s1) (count s2))\n                        (/ 2) floor dec)]\n    (remove nil?\n      (for [[i top] (enumerate s1)]\n        (first\n          (for [[j bottom] (enumerate s2)\n                :when (and (= top bottom)\n                           (<= (- i window-span) j (inc (+ i window-span))))]\n             top))))))\n\n(defn jaro-distance\n  [s1 s2]\n  (let [m1 (ordered-matches s1 s2)\n        m2 (ordered-matches s2 s1)]\n    (if (empty? m1) 0\n      (let [m (count m1)\n            non-matches (->> (map = m1 m2)\n                             (filter false?)\n                             count)\n            t (/ non-matches 2)]\n        (/ (+ (/ m (count s1)) (/ m (count s2)) (/ (- m t)\n                                                   m))\n           3)))))\n"]}